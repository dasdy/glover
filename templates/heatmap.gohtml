<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="refresh" content="600" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Glove80 Key Heatmap</title>
    <link rel="stylesheet" href="/assets/css/styles.css" />
    <link rel="stylesheet" href="/assets/css/output.css" />
  </head>

  <body class="bg-lime-100">
    <div class="flex flex-col items-center justify-center">
      <div id="keysgrid" class="mt-20 inline-grid grid-cols-12 gap-1">
        {{- range .Items }}
          <div class="aspect-square">
            {{ if .Visible }}
              <div
                id="key-{{ .Position }}"
                class="grid-item flex h-full w-full flex-col items-center justify-center rounded-md border border-solid border-gray-50 p-4"
              >
                <span class="" id="key-msg-{{ .Position }}">A </span>
                <span
                  class="keys-pressed font-semibold"
                  id="keys-pressed-{{ .Position }}"
                  >{{ .Label }}</span
                >
              </div>
            {{ else }}
              <div id="key-{{ .Position }}" class="grid-item-hidden"></div>
            {{ end }}
          </div>
        {{- end }}
      </div>
      <div class="slidecontainer flex w-6/12 flex-row">
        <label for="colorClipRange" class="mr-1 content-center align-middle"
          >Color Clipping at:</label
        >
        <input
          type="range"
          min="1"
          max="{{ .MaxVal }}"
          value="{{ .MaxVal }}"
          class="slider mt-1 h-12 w-9/12"
          step="10"
          id="colorClipRange"
        />
        <span id="colorClipSpan" class="ml-1 content-center align-middle"
          >{{ .MaxVal }}</span
        >
      </div>
    </div>

    <script src="/assets/js/colorize.js"></script>
    <script>
        colorize({{ .MaxVal}})
        var slider = document.getElementById("colorClipRange");
        var output = document.getElementById("colorClipSpan");

        // Update the current slider value (each time you drag the slider handle)
        slider.oninput = function () {
            output.innerHTML = this.value;
            colorize(this.value)
        }
    </script>
  </body>
</html>
